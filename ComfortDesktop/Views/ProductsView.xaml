<UserControl x:Class="ComfortDesktop.views.ProductsView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ComfortDesktop.views"
        mc:Ignorable="d"
        d:DesignHeight="600" d:DesignWidth="1200" Background="white">
    
    <UserControl.Resources>
        <!-- Modern Card Style -->
        <Style x:Key="ModernCardStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#E1E8FF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="25"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect ShadowDepth="3" Opacity="0.08" BlurRadius="10" Direction="270"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Header Text Style -->
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#355CBD"/>
            <Setter Property="Margin" Value="0,0,0,20"/>
        </Style>

        <!-- Input Label Style -->
        <Style x:Key="InputLabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#355CBD"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>

        <!-- Modern TextBox Style -->
        <Style x:Key="ModernTextBoxStyle" TargetType="TextBox">
            <Setter Property="Height" Value="40"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderBrush" Value="#E1E8FF"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#355CBD"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderBrush" Value="#355CBD"/>
                </Trigger>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="#355CBD"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Modern ComboBox Style -->
        <Style x:Key="ModernComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Height" Value="40"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderBrush" Value="#E1E8FF"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#355CBD"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderBrush" Value="#355CBD"/>
                </Trigger>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="#355CBD"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Modern Button Style -->
        <Style x:Key="ModernButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#355CBD"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Border.CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="20,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#2A4A9C"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#1A3A8F"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Danger Button Style -->
        <Style x:Key="DangerButtonStyle" TargetType="Button" BasedOn="{StaticResource ModernButtonStyle}">
            <Setter Property="Background" Value="#FF4757"/>
            <Setter Property="Foreground" Value="White"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E84151"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#D63031"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Modern DataGrid Style -->
        <Style x:Key="ModernDataGridStyle" TargetType="DataGrid">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#E1E8FF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="RowBackground" Value="White"/>
            <Setter Property="AlternatingRowBackground" Value="#F8FAFF"/>
            <Setter Property="HorizontalGridLinesBrush" Value="#F0F4FF"/>
            <Setter Property="VerticalGridLinesBrush" Value="#F0F4FF"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="CanUserDeleteRows" Value="False"/>
            <Setter Property="CanUserReorderColumns" Value="False"/>
            <Setter Property="CanUserResizeColumns" Value="True"/>
            <Setter Property="CanUserSortColumns" Value="True"/>
            <Setter Property="ScrollViewer.CanContentScroll" Value="True"/>
        </Style>

        <!-- DataGrid Column Header Style -->
        <Style x:Key="DataGridColumnHeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#355CBD"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

        <!-- DataGrid Cell Style -->
        <Style x:Key="DataGridCellStyle" TargetType="DataGridCell">
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#E8EEFF"/>
                    <Setter Property="Foreground" Value="#355CBD"/>
                </Trigger>
            </Style.Triggers>
        </Style>

    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="20">
        <StackPanel>
            <!-- Header Section -->
            <Border Style="{StaticResource ModernCardStyle}" Margin="0,0,0,25">
                <StackPanel>
                    <TextBlock Text="📦 Управление продукцией" 
                               FontSize="24" 
                               FontWeight="Bold" 
                               Foreground="#355CBD"
                               Margin="0,0,0,10"/>
                    <TextBlock Text="Добавление и редактирование продуктов производства" 
                               FontSize="14" 
                               Foreground="#6B8CE8"
                               FontWeight="Medium"/>
                </StackPanel>
            </Border>

            <!-- Add Product Form -->
            <Border Style="{StaticResource ModernCardStyle}" Margin="0,0,0,25">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                        <TextBlock Text="➕" FontSize="16" Margin="0,0,8,0" VerticalAlignment="Center"/>
                        <TextBlock Text="Добавить новый продукт" Style="{StaticResource SectionHeaderStyle}"/>
                    </StackPanel>

                    <!-- First Row of Inputs -->
                    <Grid Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="15"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="15"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Артикул *" Style="{StaticResource InputLabelStyle}"/>
                            <TextBox Text="{Binding NewProduct.ArticleNumber}" 
                                     Style="{StaticResource ModernTextBoxStyle}"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2">
                            <TextBlock Text="Наименование *" Style="{StaticResource InputLabelStyle}"/>
                            <TextBox Text="{Binding NewProduct.ProductName}" 
                                     Style="{StaticResource ModernTextBoxStyle}"/>
                        </StackPanel>

                        <StackPanel Grid.Column="4">
                            <TextBlock Text="Минимальная цена *" Style="{StaticResource InputLabelStyle}"/>
                            <TextBox Text="{Binding NewProduct.MinPartnerPrice}" 
                                     Style="{StaticResource ModernTextBoxStyle}"/>
                        </StackPanel>
                    </Grid>

                    <!-- Second Row of Inputs -->
                    <Grid Margin="0,0,0,25">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="15"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Тип продукции *" Style="{StaticResource InputLabelStyle}"/>
                            <ComboBox ItemsSource="{Binding ProductTypes}"
                                      DisplayMemberPath="ProductTypeName"
                                      SelectedValuePath="ProductTypeID"
                                      SelectedValue="{Binding NewProduct.ProductTypeID}"
                                      Style="{StaticResource ModernComboBoxStyle}"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2">
                            <TextBlock Text="Основной материал *" Style="{StaticResource InputLabelStyle}"/>
                            <ComboBox ItemsSource="{Binding MaterialTypes}"
                                      DisplayMemberPath="MaterialTypeName"
                                      SelectedValuePath="MaterialTypeID"
                                      SelectedValue="{Binding NewProduct.MaterialTypeID}"
                                      Style="{StaticResource ModernComboBoxStyle}"/>
                        </StackPanel>
                    </Grid>

                    <!-- Action Buttons -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="Добавить продукт" 
                                Command="{Binding CreateProductCommand}"
                                Style="{StaticResource ModernButtonStyle}"
                                Margin="0,0,10,0"/>
                        <Button Content="Обновить выбранный" 
                                Command="{Binding UpdateProductCommand}"
                                Style="{StaticResource ModernButtonStyle}"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Products List -->
            <Border Style="{StaticResource ModernCardStyle}">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                        <TextBlock Text="📋" FontSize="16" Margin="0,0,8,0" VerticalAlignment="Center"/>
                        <TextBlock Text="Список продукции" Style="{StaticResource SectionHeaderStyle}"/>
                    </StackPanel>

                    <DataGrid ItemsSource="{Binding Products}"
                              SelectedItem="{Binding SelectedProduct}"
                              Style="{StaticResource ModernDataGridStyle}"
                              ColumnHeaderStyle="{StaticResource DataGridColumnHeaderStyle}"
                              CellStyle="{StaticResource DataGridCellStyle}"
                              Height="350">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Артикул" 
                                                Binding="{Binding ArticleNumber}" 
                                                Width="120"/>
                            <DataGridTextColumn Header="Наименование" 
                                                Binding="{Binding ProductName}" 
                                                Width="200"/>
                            <DataGridTextColumn Header="Тип" 
                                                Binding="{Binding ProductType}" 
                                                Width="150"/>
                            <DataGridTextColumn Header="Материал" 
                                                Binding="{Binding MaterialType}" 
                                                Width="150"/>
                            <DataGridTextColumn Header="Цена" 
                                                Binding="{Binding MinPartnerPrice, StringFormat=C2}" 
                                                Width="120"/>
                            <DataGridTemplateColumn Width="100">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button Content="Удалить" 
                                                Command="{Binding DataContext.DeleteProductCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                                Style="{StaticResource DangerButtonStyle}"
                                                Padding="10,5"
                                                FontSize="12"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>

